<!DOCTYPE html>
<html>

<head>
    <title>spotifusion</title>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery.js"></script>
    <base href="/">
    <link rel="stylesheet" type="text/css" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Raleway&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
</head>

<body>

    <div class="sticky-top text-center pt-3 pb-2 header">
        <h3 class="display-5">spotifusion</h3>
    </div>

    <div class="container-fluid">
        <div class="row">
            <div class="col col-lg-9 pt-5 mt-5 ps-5 pe-5 center-box">
                <h1 class="display-4">create your group:</h1>
                <form method="GET" action="/group">
                    <div class="input-group mt-4 mb-5 pb-3 ps-2 pe-2">
                        <input type="text" name="group_name" class="custom-input form-control" placeholder="group name" aria-label="group_name" aria-describedby="basic-addon1">
                    </div>
                    <div class="input-group text-center mt-4 mb-5 ps-2 pe-2">
                        <input class="btn btn-lg btn-custom" type="submit" value="create">
                    </div>
                </form>
            </div>
        </div>
        <div class="row">
            <div class="col col-lg-9 pt-5 mt-5 ps-5 pe-5 center-box">
                <h1 class="display-4">join your group:</h1>
            </div>
        </div>
        <div class="row center-box">
            <div class="col col-lg-9 pt-3 ps-5 pe-5 center-box">
                <form id="pinform" method="GET" action="/group">
                    <div class="col-8 col-lg-7 ps-5">
                        <input type="text" name="pin1" id="pin1" class="pin-entry custom-input form-control m-2" maxlength="1" aria-label="pin1" aria-describedby="basic-addon1" onkeyup="moveOnMax(this,'pin2', 'pin1')" />
                        <input type="text" name="pin2" id="pin2" class="pin-entry custom-input form-control m-2" maxlength="1" aria-label="pin2" aria-describedby="basic-addon1" onkeyup="moveOnMax(this,'pin3', 'pin1')" />
                        <input type="text" name="pin3" id="pin3" class="pin-entry custom-input form-control m-2" maxlength="1" aria-label="pin3" aria-describedby="basic-addon1" onkeyup="moveOnMax(this,'pin4', 'pin2')" />
                        <input type="text" name="pin4" id="pin4" class="pin-entry custom-input form-control m-2" maxlength="1" aria-label="pin4" aria-describedby="basic-addon1" onkeyup="moveOnMax(this,'pin4', 'pin3')" />
                    </div>
                    <div class="col-4 col-lg-2 pe-5">
                        <div class="input-group text-center mt-4 mb-3 pe-2">
                            <input class="btn btn-lg btn-custom-join" type="submit" value="join">
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script type="text/javascript">
        // if (!String.prototype.format) {
        //     String.prototype.format = function() {
        //         var args = arguments;
        //         return this.replace(/{(\d+)}/g, function(match, number) {
        //             return typeof args[number] != 'undefined' ? args[number] : match;
        //         });
        //     };
        // }

        // window.history.pushState('createjoin', 'spotifusion', '/');

        const results = '<%= results %>'
            .replace(/&#34;/g, '"')
            .replace(/&#39;/g, "'");

        const resultsJSON = JSON.parse(results);
        console.log(resultsJSON);

        moveOnMax = function(field, nextFieldID, prevFieldID) {
            if (field.value.length == 1) {
                document.getElementById(nextFieldID).focus();
            } else {
                document.getElementById(prevFieldID).focus();
            }
        }
    </script>

</body>

</html>